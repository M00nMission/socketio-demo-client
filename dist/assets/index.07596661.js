import{r as a,j as d,L as m,P as f,U as p,l as h,R as x,a as g}from"./vendor.d5d9c488.js";const b=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const u of n.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}};b();const i=a.exports.createContext({}),e=d.exports.jsx,c=d.exports.jsxs;function y({socket:t}){const{setUser:l}=a.exports.useContext(i),[s,o]=a.exports.useState("");return a.exports.useEffect(()=>{t.on("user",n=>{l(n)})},[t]),c("form",{onSubmit:n=>{n.preventDefault(),t.emit("user",s),o("")},children:[e("input",{type:"text",className:"w-full py-2 pl-4 mb-3 bg-slate-100 rounded-lg outline-none focus:text-slate-800",placeholder:"Name...",value:s,onChange:n=>o(n.target.value)}),c("button",{type:"submit",className:"flex items-center justify-center w-full bg-blue-500 text-white text-lg p-2 rounded-lg",children:[e(m,{className:"w-7 h-7 mr-2"}),e("span",{children:"Enter..."})]})]})}function N({msg:t}){const{user:l}=a.exports.useContext(i),s=l.id===t.user.id;return e("li",{className:`flex justify-${s?"end":"start"}`,children:c("div",{className:`relative max-w-xl px-4 py-2 text-white bg-${s?"cyan":"blue"}-500 rounded shadow`,children:[s?null:e("span",{className:"block",children:t.user.name}),e("span",{children:t.message})]})})}function v({socket:t}){const[l,s]=a.exports.useState([]);return a.exports.useEffect(()=>{t.on("msg",o=>{s(o)})},[t]),e("ul",{className:"space-y-2",children:l.map((o,r)=>e(N,{msg:o},r))})}function w({socket:t}){const{user:l}=a.exports.useContext(i),[s,o]=a.exports.useState("");return e("form",{onSubmit:n=>{n.preventDefault(),t.emit("msg",{user:l,message:s}),o("")},children:c("div",{className:"flex items-center justify-between w-full p-3 border-t border-gray-300",children:[e("input",{type:"text",placeholder:"Message...",className:"w-full py-2 pl-4 mr-3 bg-slate-100 rounded-lg outline-none focus:text-slate-800",value:s,onChange:n=>o(n.target.value),required:!0}),e("button",{type:"submit",children:e(f,{className:"w-5 h-5 text-slate-500 hover:text-slate-800 origin-center transform rotate-90"})})]})})}function C({user:t}){return c("div",{className:"flex items-center px-3 py-2 text-sm transition duration-150 ease-in-out border-b border-gray-300 focus:outline-none",children:[e("div",{className:"flex items-center justify-center w-12 h-10 bg-blue-500 text-white rounded-full",children:e(p,{className:"h-6 w-6"})}),e("div",{className:"w-full",children:e("span",{className:"block ml-2 font-semibold text-slate-600",children:t.name})})]})}function j({socket:t}){const[l,s]=a.exports.useState([]);return a.exports.useEffect(()=>{t.on("users",o=>{s(o)})},[t]),e("ul",{className:"overflow-auto h-[32rem]",children:l.map((o,r)=>e("li",{children:e(C,{user:o})},r))})}function S(){const{user:t,setUser:l}=a.exports.useContext(i),[s,o]=a.exports.useState(null);return a.exports.useEffect(()=>{const r=h("http://localhost:8080");return o(r),l(null),()=>r.close()},[o]),c("div",{className:"container mx-auto",children:[e("h1",{className:"text-3xl font-bold text-center bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-b py-3 mb-5",children:t?`Chatting as ${t.name}`:"Chat as..."}),t&&s&&s.connected?c("div",{className:"border rounded grid grid-cols-3",children:[e("div",{className:"border-r border-gray-300 col-span-1",children:e(j,{socket:s})}),c("div",{className:"col-span-2",children:[e("div",{className:"w-full p-6 overflow-y-auto h-[40rem]",children:e(v,{socket:s})}),e(w,{socket:s})]})]}):null,!t&&s?e("div",{className:"w-1/3 mx-auto",children:e(y,{socket:s})}):null,e("div",{className:"hidden bg-cyan-500 justify-end justify-start"})]})}function M(){const[t,l]=a.exports.useState(null),s={user:t,setUser:l};return e(i.Provider,{value:s,children:e(S,{})})}x.render(e(g.StrictMode,{children:e(M,{})}),document.getElementById("root"));
